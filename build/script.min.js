(()=>{"use strict";class e{constructor(e){this.selelector=e,this.imagesList=document.querySelectorAll(e),this.sliderRootElement=document.querySelector(".js-slider"),this.sliderRootElement.prototypeClass="js-slider__thumbs-item--prototype",this.sliderRootElement.currentImageClass="js-slider__thumbs-image--current",this.sliderRootElement.arrows=[this.sliderRootElement.querySelector(".js-slider__nav--next"),this.sliderRootElement.querySelector(".js-slider__nav--prev")]}run(){this.initEvents(),this.initCustomEvents()}initEvents(){const[e,t]=this.sliderRootElement.arrows;this.imagesList.forEach((e=>e.addEventListener("click",(e=>this.fireCustomEvent(e.currentTarget,"js-slider-img-click"))))),this.imagesList.forEach((e=>e.addEventListener("click",(e=>this.fireCustomEvent(e.currentTarget,"js-slider-start"))))),this.sliderRootElement.arrows.forEach((e=>e.addEventListener("mouseover",(e=>this.fireCustomEvent(e.currentTarget,"js-slider-stop"))))),this.sliderRootElement.arrows.forEach((e=>e.addEventListener("mouseout",(e=>this.fireCustomEvent(e.currentTarget,"js-slider-start"))))),e&&e.addEventListener("click",(e=>this.fireCustomEvent(this.sliderRootElement,"js-slider-img-next"))),t&&t.addEventListener("click",(e=>this.fireCustomEvent(this.sliderRootElement,"js-slider-img-prev")));const s=this.sliderRootElement.querySelector(".js-slider__zoom");s&&s.addEventListener("click",(function(e){e.target===e.currentTarget&&this.fireCustomEvent(this.sliderRootElement,"js-slider-close")}))}initCustomEvents(){this.imagesList.forEach((e=>e.addEventListener("js-slider-img-click",(e=>this.onImageClick(e))))),this.imagesList.forEach((e=>e.addEventListener("js-slider-start",(e=>this.slideImages(e))))),this.sliderRootElement.arrows.forEach((e=>e.addEventListener("js-slider-stop",(e=>this.stopSlideImages(e))))),this.sliderRootElement.arrows.forEach((e=>e.addEventListener("js-slider-start",(e=>this.slideImages(e))))),this.sliderRootElement.addEventListener("js-slider-img-next",(e=>this.onImageNext(e))),this.sliderRootElement.addEventListener("js-slider-img-prev",(e=>this.onImagePrev(e))),this.sliderRootElement.addEventListener("js-slider-close",(e=>{this.onClose(e),this.stopSlideImages(e)}))}fireCustomEvent(e,t){console.log(e.className,"=>",t);const s=new CustomEvent(t,{bubbles:!0});e.dispatchEvent(s)}stopSlideImages(e){console.log(this.slideInterval),this.slideInterval&&clearInterval(this.slideInterval)}slideImages(e){console.log(this),this.stopSlideImages(),this.slideInterval=setInterval(this.onImageNext.bind(this),3e3)}onImageClick(e){this.sliderRootElement.classList.add("js-slider--active");const t=e.currentTarget.querySelector("img").src;this.sliderRootElement.querySelector(".js-slider__image").src=t;const s=e.currentTarget.dataset.sliderGroupName;this.createThumbs(s,t)}createThumbs(e,t){const s=document.querySelectorAll(`${this.selelector}[data-slider-group-name= '${e}']`);document.querySelector(".js-slider__thumbs-item--prototype"),s.forEach((e=>{const s=this.cloneThumbElement(),r=s.querySelector("img");r.src=e.querySelector("img").src,r.src===t&&r.classList.add("js-slider__thumbs-image--current"),document.querySelector(".js-slider__thumbs").appendChild(s)}))}cloneThumbElement(){const e=document.querySelector(`.${this.sliderRootElement.prototypeClass}`).cloneNode(!0);return e.classList.remove("js-slider__thumbs-item--prototype"),e}onImageNext(){console.log(this,"onImageNext");const e=document.querySelector(`.${this.sliderRootElement.currentImageClass}`),t=e.parentElement.nextElementSibling;this.changeCurrentImage(t,e)}changeCurrentImage(e,t){if(e&&!e.className.includes(`${this.sliderRootElement.prototypeClass}`)){const s=e.querySelector("img");s.classList.add(this.sliderRootElement.currentImageClass),document.querySelector(".js-slider__image").src=s.src,t.classList.remove(this.sliderRootElement.currentImageClass)}}onImagePrev(e){console.log(this,"onImagePrev");const t=document.querySelector(".js-slider__thumbs-image--current"),s=t.parentElement.previousElementSibling;this.changeCurrentImage(s,t)}onClose(e){e.currentTarget.classList.remove("js-slider--active"),this.querySelectorAll(".js-slider__thumbs-item:not(.js-slider__thumbs-item--prototype)").forEach((e=>e.parentElement.removeChild(e)))}}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".gallery__item").forEach((e=>{e.dataset.sliderGroupName=Math.random()>.5?"nice":"good"})),new e(".gallery__item").run()}))})();